---

title: LoginSorare


keywords: fastai
sidebar: home_sidebar

summary: "Login to sorare using email to have access to sorare data."
description: "Login to sorare using email to have access to sorare data."
nb_path: "00_core.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">bcrypt</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">LoginError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">LoginSorare</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">two_factor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">app_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;App name must be a string&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Email name must be a string&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Password name must be a string&quot;</span><span class="p">)</span>   
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">two_factor</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Two factor name must be a string&quot;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">app_name</span> <span class="o">=</span> <span class="n">app_name</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">email</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">two_factor</span> <span class="o">=</span> <span class="n">two_factor</span>
        

    <span class="k">def</span> <span class="nf">post_query</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">run_post_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">query</span><span class="p">,</span> <span class="n">variables</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">],</span> 
                             <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> <span class="s1">&#39;OperationName&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ops_name&quot;</span><span class="p">],</span> <span class="s1">&#39;variables&#39;</span><span class="p">:</span> <span class="n">variables</span><span class="p">},</span> 
                             <span class="n">headers</span><span class="o">=</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;headers&quot;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">LoginError</span><span class="p">(</span><span class="s2">&quot;Please check email, password or two factor token&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">run_post_query</span>
    
    
    <span class="nd">@post_query</span>
    <span class="k">def</span> <span class="nf">login_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">two_factor</span><span class="p">):</span>
            <span class="n">variables</span> <span class="o">=</span> <span class="p">{</span>
              <span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;otpSessionChallenge&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">opt_challenge</span><span class="p">,</span>
                <span class="s2">&quot;otpAttempt&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">two_factor</span>
              <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">variables</span> <span class="o">=</span> <span class="p">{</span>
              <span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_password</span><span class="p">()</span>
              <span class="p">}</span>
            <span class="p">}</span>
                    
        <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            mutation SignInMutation($input: signInInput!)</span><span class="se">{{</span><span class="s2"></span>
<span class="s2">              signIn(input: $input) </span><span class="se">{{</span><span class="s2"></span>
<span class="s2">                currentUser </span><span class="se">{{</span><span class="s2"></span>
<span class="s2">                  slug</span>
<span class="s2">                  jwtToken(aud: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">app_name</span><span class="si">}</span><span class="s2">&quot;) </span><span class="se">{{</span><span class="s2"></span>
<span class="s2">                    token</span>
<span class="s2">                    expiredAt</span>
<span class="s2">                  </span><span class="se">}}</span><span class="s2"></span>
<span class="s2">                </span><span class="se">}}</span><span class="s2"></span>
<span class="s2">                errors </span><span class="se">{{</span><span class="s2"></span>
<span class="s2">                  message</span>
<span class="s2">                </span><span class="se">}}</span><span class="s2"></span>
<span class="s2">              </span><span class="se">}}</span><span class="s2"></span>
<span class="s2">            </span><span class="se">}}</span><span class="s2"></span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">query</span><span class="p">,</span> <span class="n">variables</span>
    
    <span class="nd">@post_query</span>
    <span class="k">def</span> <span class="nf">two_factor_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="n">variables</span> <span class="o">=</span> <span class="p">{</span>
              <span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_password</span><span class="p">()</span>
              <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            mutation SignInMutation($input: signInInput!) </span><span class="se">{{</span><span class="s2"></span>
<span class="s2">              signIn(input: $input) </span><span class="se">{{</span><span class="s2"></span>
<span class="s2">                currentUser </span><span class="se">{{</span><span class="s2"></span>
<span class="s2">                  slug</span>
<span class="s2">                  jwtToken(aud: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">app_name</span><span class="si">}</span><span class="s2">&quot;) </span><span class="se">{{</span><span class="s2"></span>
<span class="s2">                    token</span>
<span class="s2">                    expiredAt</span>
<span class="s2">                  </span><span class="se">}}</span><span class="s2"></span>
<span class="s2">                </span><span class="se">}}</span><span class="s2"></span>
<span class="s2">                otpSessionChallenge</span>
<span class="s2">                errors </span><span class="se">{{</span><span class="s2"></span>
<span class="s2">                  message</span>
<span class="s2">                </span><span class="se">}}</span><span class="s2"></span>
<span class="s2">              </span><span class="se">}}</span><span class="s2"></span>
<span class="s2">            </span><span class="se">}}</span><span class="s2"></span>
<span class="s2">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="n">query</span><span class="p">,</span> <span class="n">variables</span>
    
    <span class="k">def</span> <span class="nf">retrieve_password</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://api.sorare.com/api/v1/users/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">email</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="n">salt</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;salt&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="n">hashed_password</span> <span class="o">=</span> <span class="n">bcrypt</span><span class="o">.</span><span class="n">hashpw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span> <span class="n">salt</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hashed_password</span>
    

    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://api.sorare.com/graphql&quot;</span>
        
        <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">two_factor</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">query_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">two_factor_query</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">ops_name</span><span class="o">=</span><span class="s1">&#39;SignInMutation&#39;</span><span class="p">)</span>
                <span class="n">query_response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">query_factor</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

                <span class="n">errors</span> <span class="o">=</span> <span class="n">query_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signIn&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;errors&quot;</span><span class="p">,</span> <span class="p">[])</span>
                
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="ow">and</span> <span class="n">errors</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;message&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;2fa_missing&quot;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">LoginError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Please check email, password or two factor token - </span><span class="si">{</span><span class="n">errors</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;message&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    
                <span class="bp">self</span><span class="o">.</span><span class="n">opt_challenge</span> <span class="o">=</span> <span class="n">query_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signIn&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;otpSessionChallenge&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                
                <span class="n">query_login</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">login_query</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">ops_name</span><span class="o">=</span><span class="s1">&#39;SignInMutation&#39;</span><span class="p">)</span>
                <span class="n">query_response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">query_login</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                
                <span class="n">jwt</span> <span class="o">=</span> <span class="n">query_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signIn&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;currentUser&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;jwtToken&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="p">{})</span>
                <span class="n">slug</span> <span class="o">=</span> <span class="n">query_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signIn&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;currentUser&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;slug&quot;</span><span class="p">,</span> <span class="p">{})</span>
                
                <span class="k">return</span> <span class="n">jwt</span><span class="p">,</span> <span class="n">slug</span>
            
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LoginError</span><span class="p">(</span><span class="s2">&quot;Please check email, password or two factor token&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">login_query</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">ops_name</span><span class="o">=</span><span class="s1">&#39;SignInMutation&#39;</span><span class="p">)</span>
                <span class="n">query_response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                <span class="n">errors</span> <span class="o">=</span> <span class="n">query_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signIn&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;errors&quot;</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">LoginError</span><span class="p">(</span><span class="s2">&quot;Please check email, password or two factor token&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">jwt</span> <span class="o">=</span> <span class="n">query_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signIn&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;currentUser&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;jwtToken&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="p">{})</span>
                    <span class="n">slug</span> <span class="o">=</span> <span class="n">query_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signIn&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;currentUser&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;slug&quot;</span><span class="p">,</span> <span class="p">{})</span>
                    <span class="k">return</span> <span class="n">jwt</span><span class="p">,</span> <span class="n">slug</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LoginError</span><span class="p">(</span><span class="s2">&quot;Please check email, password or two factor token&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="n">LoginSorare</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;test_app&quot;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s2">&quot;abc@gmail.com&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="n">two_factor</span><span class="o">=</span><span class="s2">&quot;12345&quot;</span><span class="p">)</span>
<span class="n">token</span><span class="p">,</span> <span class="n">club_name</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">LoginError</span>                                Traceback (most recent call last)
Input <span class="ansi-green-fg">In [7]</span>, in <span class="ansi-cyan-fg">&lt;cell line: 3&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span style="color: rgb(95,135,135)">#skip</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> l <span style="color: rgb(98,98,98)">=</span> LoginSorare(app_name<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">test_app</span><span style="color: rgb(175,0,0)">&#34;</span>, email<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">abc@gmail.com</span><span style="color: rgb(175,0,0)">&#34;</span>, password<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">abc</span><span style="color: rgb(175,0,0)">&#34;</span>, two_factor<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">12345</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-fg">----&gt; 3</span> token, club_name <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">l</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">login</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>

Input <span class="ansi-green-fg">In [6]</span>, in <span class="ansi-cyan-fg">LoginSorare.login</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    112</span> errors <span style="color: rgb(98,98,98)">=</span> query_response<span style="color: rgb(98,98,98)">.</span>get(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">data</span><span style="color: rgb(175,0,0)">&#34;</span>,{})<span style="color: rgb(98,98,98)">.</span>get(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">signIn</span><span style="color: rgb(175,0,0)">&#34;</span>, {})<span style="color: rgb(98,98,98)">.</span>get(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">errors</span><span style="color: rgb(175,0,0)">&#34;</span>, [])
<span class="ansi-green-intense-fg ansi-bold">    114</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">len</span>(errors) <span class="ansi-bold" style="color: rgb(175,0,255)">and</span> errors[<span style="color: rgb(98,98,98)">0</span>][<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">message</span><span style="color: rgb(175,0,0)">&#39;</span>] <span style="color: rgb(98,98,98)">!=</span> <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">2fa_missing</span><span style="color: rgb(175,0,0)">&#34;</span>:
<span class="ansi-green-fg">--&gt; 115</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span> LoginError(<span style="color: rgb(175,0,0)">f</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Please check email, password or two factor token - </span><span class="ansi-bold" style="color: rgb(175,95,135)">{</span>errors[<span style="color: rgb(98,98,98)">0</span>][<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">message</span><span style="color: rgb(175,0,0)">&#39;</span>]<span class="ansi-bold" style="color: rgb(175,95,135)">}</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-intense-fg ansi-bold">    117</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>opt_challenge <span style="color: rgb(98,98,98)">=</span> query_response<span style="color: rgb(98,98,98)">.</span>get(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">data</span><span style="color: rgb(175,0,0)">&#34;</span>,{})<span style="color: rgb(98,98,98)">.</span>get(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">signIn</span><span style="color: rgb(175,0,0)">&#34;</span>, {})<span style="color: rgb(98,98,98)">.</span>get(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">otpSessionChallenge</span><span style="color: rgb(175,0,0)">&#34;</span>, <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>)
<span class="ansi-green-intense-fg ansi-bold">    119</span> query_login <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>login_query(url<span style="color: rgb(98,98,98)">=</span>url, headers<span style="color: rgb(98,98,98)">=</span>headers, ops_name<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">SignInMutation</span><span style="color: rgb(175,0,0)">&#39;</span>)

<span class="ansi-red-fg">LoginError</span>: Please check email, password or two factor token - invalid</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="kn">import</span> <span class="n">notebook2script</span><span class="p">;</span> <span class="n">notebook2script</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

